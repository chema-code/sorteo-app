(this["webpackJsonpsorteo-app"]=this["webpackJsonpsorteo-app"]||[]).push([[0],{259:function(e,t){},261:function(e,t){},290:function(e,t){},291:function(e,t){},402:function(e,t){},574:function(e,t,a){"use strict";a.r(t);var r=a(7),o=a.n(r),c=a(223),n=a.n(c),s=a(24),i=a(12),d=a.n(i),l=a(28),u=a(25),_=a(231),p=a(119),m=a(21),b=a(4),j=(m.StyleSheet.create({body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35},title:{fontSize:24,textAlign:"center"},text:{fontSize:10,textAlign:"left"},header:{fontSize:12,marginBottom:20,textAlign:"center",color:"grey"},pageNumber:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"}}),function(e){var t=e.bgcolor,a=e.progress,r={height:e.height,width:"80%",backgroundColor:"whitesmoke",borderRadius:40,margin:50},o={height:"100%",width:"".concat(a,"%"),backgroundColor:t,borderRadius:40,textAlign:"right"};return Object(b.jsx)("div",{style:r,children:Object(b.jsx)("div",{style:o,children:Object(b.jsx)("span",{style:{padding:10,color:"black",fontWeight:900},children:"".concat(a,"%")})})})}),g=a(78),x=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(r.useState)(!1),n=Object(u.a)(c,2),i=n[0],m=n[1],x=Object(r.useState)(!1),O=Object(u.a)(x,2),h=O[0],f=O[1],v=Object(r.useState)(),N=Object(u.a)(v,2),P=N[0],y=N[1],C=Object(r.useRef)(null),E=Object(r.useState)(!0),S=Object(u.a)(E,2),M=S[0],w=S[1],A=Object(r.useState)(0),L=Object(u.a)(A,2),R=L[0],k=L[1];Object(r.useEffect)((function(){console.log(a)}),[a]);var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),a=Object(u.a)(t,2),o=a[0],c=a[1];return[o,function(e){var t=e.target;c(Object(p.a)(Object(p.a)({},o),{},Object(s.a)({},t.name,t.value)))},function(){c(e)}]}({NumPremios:20,NumMinSorteo:1,NumMaxSorteo:200}),T=Object(u.a)(D,2),G=T[0],q=T[1],I=G.NumPremios,B=G.NumMinSorteo,U=G.NumMaxSorteo,W=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),console.log("Empieza Sorteo",I,B,U),e.next=4,Object(g.a)(a,I,B,U,z);case 4:t=e.sent,k(100),w(!1),K(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fin sorteo",t),e.next=3,Object(g.b)(1e3);case 3:return y(t),f(!0),e.next=7,Object(g.b)(1e3);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("setParentProgress",t),k(Math.round(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Sorteo App v0.6"}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-5",children:[Object(b.jsxs)("div",{className:"input-group input-group mb-3",children:[Object(b.jsx)("div",{className:"input-group-prepend",children:Object(b.jsx)("span",{className:"input-group-text",id:"inputGroup-NumPremios",children:"*Total premios del sorteo"})}),Object(b.jsx)("input",{type:"text",name:"NumPremios",onChange:q,value:I,placeholder:"Total Premios",autoComplete:"off",required:!0,className:"form-control","aria-label":"Default","aria-describedby":"inputGroup-NumPremios"})]}),Object(b.jsxs)("div",{className:"input-group input-group mb-3",children:[Object(b.jsx)("div",{className:"input-group-prepend",children:Object(b.jsx)("span",{className:"input-group-text",id:"inputGroup-NumMinSorteo",children:"*Valor inicial del sorteo"})}),Object(b.jsx)("input",{type:"text",name:"NumMinSorteo",onChange:q,value:B,placeholder:"N\xfamero inicial sorteo",autoComplete:"off",required:!0,className:"form-control","aria-label":"Default","aria-describedby":"inputGroup-NumMinSorteo"})]}),Object(b.jsxs)("div",{className:"input-group input-group mb-3",children:[Object(b.jsx)("div",{cclassNamelass:"input-group-prepend",children:Object(b.jsx)("span",{className:"input-group-text",id:"inputGroup-NumMaxSorteo",children:"*Valor m\xe1ximo del sorteo"})}),Object(b.jsx)("input",{type:"text",name:"NumMaxSorteo",onChange:q,value:U,placeholder:"N\xfamero m\xe1ximo sorteo",autoComplete:"off",required:!0,className:"form-control","aria-label":"Default","aria-describedby":"inputGroup-NumMaxSorteo"})]}),Object(b.jsxs)("div",{className:"input-group mb-3",children:[Object(b.jsx)("div",{className:"input-group-prepend",children:Object(b.jsx)("span",{className:"input-group-text",children:"Subir"})}),Object(b.jsxs)("div",{className:"custom-file",children:[Object(b.jsx)("input",Object(s.a)({required:!0,ref:C,onChange:function(){console.log(C.current.files),Object(l.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("uploaded!"),e.next=3,C.current.files[0].text();case 3:return t=e.sent,e.next=6,_.a(t);case 6:a=e.sent,o(a),m(!0);case 9:case"end":return e.stop()}}),e)})))()},disabled:i,type:"file",id:"input",class:"custom-file-input"},"id","inputGroupFile01")),Object(b.jsx)("label",{className:"custom-file-label",htmlFor:"inputGroupFile01",children:"Elegir Fichero"})]})]})]})}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-5",children:Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"button",className:"btn btn-primary",onClick:W,disabled:h,children:"Iniciar Sorteo"})})})}),h?Object(b.jsx)("div",{className:"row mt-5",children:Object(b.jsx)("div",{className:"col-5",children:Object(b.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){window.print()},disabled:!h,children:"Imprimir Resultados"})})}):Object(b.jsx)("div",{}),Object(b.jsx)("div",{children:Object(b.jsx)("div",{children:M?Object(b.jsx)(j,{bgcolor:"orange",progress:R,height:30}):Object(b.jsx)("div",{})})})]}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"container col-12",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"card p-1 col-2",children:Object(b.jsxs)("div",{className:"card-body p-1",children:[" ",Object(b.jsx)("h2",{className:"card-title text-center",children:"Paticipaciones"}),Object(b.jsx)("div",{children:i?Object(b.jsxs)("table",{className:"table table-bordered",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Orden"}),Object(b.jsx)("th",{scope:"col",children:"Participaci\xf3n"})]})}),Object(b.jsx)("tbody",{children:a.map((function(e,t){return Object(b.jsxs)("tr",{className:t%2===0?"table-active":"table",children:[Object(b.jsx)("td",{className:"text-right",children:t+1}),Object(b.jsx)("td",{className:"text-left",children:e.idsolicitante})]},"p"+t)}))})]}):Object(b.jsx)("div",{})})]})}),Object(b.jsx)("div",{className:"card p-1 col-6",children:Object(b.jsxs)("div",{className:"card-body p-1 ",children:[Object(b.jsx)("h2",{className:"card-title text-center",children:"Sorteo"}),Object(b.jsx)("div",{children:P?Object(b.jsxs)("table",{className:"table table-bordered",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Orden"}),Object(b.jsx)("th",{scope:"col",children:"Detalle"})]})}),Object(b.jsx)("tbody",{children:P[0].map((function(e,t){return Object(b.jsxs)("tr",{className:t%2===0?"table-active":"table",children:[Object(b.jsx)("td",{className:"text-right",children:t+1}),Object(b.jsx)("td",{className:"text-left",children:e})]},"p"+t)}))})]}):Object(b.jsx)("div",{})})]})}),Object(b.jsx)("div",{className:"card p-1 col-2",children:Object(b.jsxs)("div",{className:"card-body p-1",children:[Object(b.jsx)("h2",{className:"card-title text-center",children:"N\xfameros"}),Object(b.jsx)("div",{children:h?Object(b.jsxs)("table",{className:"table table-bordered",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Orden"}),Object(b.jsx)("th",{scope:"col",children:"N\xfamero Ganador"})]})}),Object(b.jsx)("tbody",{children:P[2].map((function(e,t){return Object(b.jsxs)("tr",{className:t%2===0?"table-active":"table",children:[Object(b.jsx)("td",{className:"text-right",children:t+1}),Object(b.jsx)("td",{className:"text-right",children:e})]},"p"+t)}))})]}):Object(b.jsx)("div",{})})]})}),Object(b.jsx)("div",{className:"card p-1 col-2",children:Object(b.jsxs)("div",{className:"card-body p-1",children:[Object(b.jsx)("h2",{className:"card-title text-center",children:"Abonados"}),Object(b.jsx)("div",{children:h?Object(b.jsxs)("table",{className:"table table-bordered",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Orden"}),Object(b.jsx)("th",{scope:"col",children:"Id Unico"})]})}),Object(b.jsx)("tbody",{children:P[1].map((function(e,t){return Object(b.jsxs)("tr",{className:t%2===0?"table-active":"table",children:[Object(b.jsx)("td",{className:"text-right",children:t+1}),Object(b.jsx)("td",{className:"text-right",children:e})]},"p"+t)}))})]}):Object(b.jsx)("div",{})})]})})]})})]})},O=function(){return Object(b.jsx)("div",{children:Object(b.jsx)(x,{})})};n.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root"))},78:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return pause})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Sortear2}));var C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(124),C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(12),C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(28);function pause(e){return new Promise((function(t,a){setTimeout((function(){t()}),e)}))}var Sortear=function(){var e=Object(C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(t,a,r,o,c){var n,s,i,d,l,u,_,p,m;return C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],s=[],i=[],console.log("valores",a,r,o),d=100/a,l=a;case 6:if(!(a>0)){e.next=30;break}if(n=addLog(n,"Inicio sorteo."),u=d*(l-a),console.log("progreso",u),c(u),console.log("premios",a),_=getRandomInt(r,o),n=addLog(n,"N\xfamero (".concat(_,")")),void 0!==(p=buscarConcursante(t,_))){e.next=18;break}return n=addLog(n,"N\xfamero (".concat(_,") no encontrados entre los concursantes.")),e.abrupt("continue",6);case 18:if(!buscarPremiado(s,_)){e.next=21;break}return n=addLog(n,"N\xfamero (".concat(_,") ya premiado.")),e.abrupt("continue",6);case 21:return m=1,p.idacomp1>0&&m++,p.idacomp2>0&&m++,p.idacomp3>0&&m++,a>=m?(s=addToGanadores(s,_),a=substractPremio(a,1),i=addToGanadores(i,p.idsolicitante),n=addLog(n,"Agregar ganador (".concat(_,") premiado, idUnico:").concat(p.idsolicitante," quedan ").concat(a,".")),p.idacomp1>0&&(i=addToGanadores(i,p.idacomp1),a=substractPremio(a,1),n=addLog(n,"Agregar ganador acompa\xf1ante(".concat(p.idacomp1,") premiado, quedan ").concat(a,"."))),p.idacomp2>0&&(i=addToGanadores(i,p.idacomp2),a=substractPremio(a,1),n=addLog(n,"Agregar ganador acompa\xf1ante (".concat(p.idacomp3,") premiado, quedan ").concat(a,"."))),p.idacomp2>0&&(i=addToGanadores(i,p.idacomp3),a=substractPremio(a,1),n=addLog(n,"Agregar ganador acompa\xf1ante (".concat(p.idacomp3,") premiado, quedan ").concat(a,".")))):n=addLog(n,"Saltamos el n\xfamero (".concat(_,") porque no quedan suficientes premios, hay:").concat(a," y se solicitan: ").concat(m,".")),e.next=28,pause(1);case 28:e.next=6;break;case 30:return n=addLog(n,"Fin sorteo."),e.abrupt("return",[n,i,s]);case 32:case"end":return e.stop()}}),e)})));return function(t,a,r,o,c){return e.apply(this,arguments)}}(),Sortear2=function(){var _ref2=Object(C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee2(data,premios,min,max,setParentProgress){var log,numerosGanadores,ganadores,campo,listaPremios,i,valor,valorProgreso,valorOrginalPremios,progreso,indiceASeleccionar,numeroPremiado,concursante,totalPremios;return C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:for(log=[],numerosGanadores=[],ganadores=[],console.log("valores",premios,min,max),campo="idsolicitante",listaPremios=[premios],i=0;i<data.length;i++)valor=eval("data["+i+"]."+campo),console.log("valor_"+i,valor),listaPremios[i]=valor;valorProgreso=100/premios,valorOrginalPremios=premios,log=addLog(log,"Inicio sorteo.");case 10:if(!(premios>0)){_context2.next=34;break}if(progreso=valorProgreso*(valorOrginalPremios-premios),console.log("progreso",progreso),setParentProgress(progreso),console.log("premios",premios),indiceASeleccionar=getRandomInt(1,listaPremios.length-1),numeroPremiado=listaPremios[indiceASeleccionar],log=addLog(log,"N\xfamero seleccionado: (".concat(numeroPremiado,")")),concursante=buscarConcursante(data,numeroPremiado),void 0!==concursante){_context2.next=22;break}return log=addLog(log,"N\xfamero (".concat(numeroPremiado,") no encontrados entre los concursantes.")),_context2.abrupt("continue",10);case 22:if(!buscarPremiado(numerosGanadores,numeroPremiado)){_context2.next=25;break}return log=addLog(log,"N\xfamero (".concat(numeroPremiado,") ya premiado.")),_context2.abrupt("continue",10);case 25:return totalPremios=1,concursante.idacomp1>0&&totalPremios++,concursante.idacomp2>0&&totalPremios++,concursante.idacomp3>0&&totalPremios++,premios>=totalPremios?(listaPremios.splice(indiceASeleccionar,1),numerosGanadores=addToGanadores(numerosGanadores,numeroPremiado),premios=substractPremio(premios,1),ganadores=addToGanadores(ganadores,concursante.idsolicitante),log=addLog(log,"Agregar ganador (".concat(numeroPremiado,") premiado, idUnico:").concat(concursante.idsolicitante," quedan ").concat(premios,".")),concursante.idacomp1>0&&(ganadores=addToGanadores(ganadores,concursante.idacomp1),premios=substractPremio(premios,1),log=addLog(log,"Agregar ganador acompa\xf1ante(".concat(concursante.idacomp1,") premiado, quedan ").concat(premios,"."))),concursante.idacomp2>0&&(ganadores=addToGanadores(ganadores,concursante.idacomp2),premios=substractPremio(premios,1),log=addLog(log,"Agregar ganador acompa\xf1ante (".concat(concursante.idacomp3,") premiado, quedan ").concat(premios,"."))),concursante.idacomp2>0&&(ganadores=addToGanadores(ganadores,concursante.idacomp3),premios=substractPremio(premios,1),log=addLog(log,"Agregar ganador acompa\xf1ante (".concat(concursante.idacomp3,") premiado, quedan ").concat(premios,".")))):log=addLog(log,"Saltamos el n\xfamero (".concat(numeroPremiado,") porque no quedan suficientes premios, hay:").concat(premios," y se solicitan: ").concat(totalPremios,".")),_context2.next=32,pause(1);case 32:_context2.next=10;break;case 34:return log=addLog(log,"Fin sorteo."),_context2.abrupt("return",[log,ganadores,numerosGanadores]);case 36:case"end":return _context2.stop()}}),_callee2)})));return function(e,t,a,r,o){return _ref2.apply(this,arguments)}}(),getRandomInt=function(e,t){return Math.round(Math.random()*(t-e))+e},buscarConcursante=function buscarConcursante(data,concursante){var campo="idsolicitante",res=data.find((function(c){return eval("c."+campo)===concursante.toString()}));return res},buscarPremiado=function(e,t){return void 0!==e.find((function(e){return e===t.toString()}))},addToGanadores=function(e,t){return[].concat(Object(C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(e),[t.toString()])},addLog=function(e,t){var a=(new Date).toISOString("es-ES")+" "+t;return[].concat(Object(C_React_sorteo_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(e),[a])},substractPremio=function(e,t){return e-t}}},[[574,1,2]]]);
//# sourceMappingURL=main.b34e96c9.chunk.js.map